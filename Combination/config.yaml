# config.yaml - Central configuration for BA_combination Unified Version

data:
  # Portfolio definitions (each portfolio has its own universe and index)
  portfolios:
    dax:
      name: "DAX Portfolio"
      universe:
        - RHMG.DE
        - ENR1n.DE
        - TKAG.DE
        - FTKn.DE
        - ACT1.DE
        - DEZG.DE
      index: ".GDAXI"  # DAX index (large cap)
      index_feature: "change_dax"

    sdax:
      name: "SDAX Portfolio"
      universe:
        - 1U1.DE
        - ADNGk.DE
        - AOFG.DE
        - COKG.DE
        - CWCG.DE
        - DMPG.DE
      index: ".SDAXI"  # SDAX index (small cap)
      index_feature: "change_sdax"

  # Common indices for all portfolios (e.g. volatility)
  common_indices:
    - ".V1XI"  # VDAX index (volatility index)

  fields:
    - "OPEN_PRC"
    - "HIGH_1"
    - "LOW_1"
    - "TRDPRC_1"
    - "ACVOL_1"

  periods:
    daily:
      interval: "daily"
      start: "2024-01-01"
      end: "2025-11-15"

    intraday:
      interval: "30min"
      start: "2024-01-01"
      end: "2025-11-15"

features:
  # Risk-free rate for Fama-French/Carhart models (decimal: 2.7% = 0.027)
  risk_free_rate: 0.027  # 2.7% per year (adjust as needed)
  
  # Input features (adjustable)
  # Note: change_dax or change_sdax is chosen automatically based on portfolio
  input_features:
    - momentum_5     # 5-period momentum
    - momentum_10    # 10-period momentum
    - momentum_20    # 20-period momentum
    - portfolio_index_change  # Becomes change_dax or change_sdax per portfolio
    - vdax_absolute  # VDAX absolute value
    - volume_ratio   # Volume ratio
    - rolling_volatility_10   # Volatility over 10 periods
    - rolling_volatility_20   # Volatility over 20 periods
    - hour_sin       # Intraday: cyclic hour (sine)
    - hour_cos       # Intraday: cyclic hour (cosine)
    - dow_sin        # Day of week (sine)
    - dow_cos        # Day of week (cosine)

  # Target variable
  target: "price_change_next"

  # Feature engineering parameters
  momentum_periods: [5, 10, 20]
  rolling_window: 20
  volatility_windows: [10, 20]

models:
  # Optional: run only selected models (empty uses enabled flags)
  active_models: ["pytorch_nn", "sklearn_nn", "ols", "ridge"]
  # ["pytorch_nn", "sklearn_nn", "ols", "ridge", "random_forest"]

  # Model settings
  pytorch_nn:
    enabled: true
    hidden1: 128
    hidden2: 64
    epochs: 400
    batch_size: 64
    learning_rate: 0.0005
    validation_split: 0.2
    weight_decay: 0.0005
    early_stopping_patience: 40
    scheduler_patience: 15

  sklearn_nn:
    enabled: true
    hidden_layer_sizes: [64, 32]
    max_iter: 1500

  ols:
    enabled: true

  ridge:
    enabled: true
    alpha_values: [0.1, 0.5, 1.0, 2.0, 5.0, 10.0]

  random_forest:
    enabled: false
    n_estimators: 300
    max_depth: 10
    min_samples_split: 5

training:
  ffc_runs: true  # Toggle FFC factor runs
  test_split: 0.2
  cross_validation:
    enabled: true
    n_splits: 5
    type: "TimeSeriesSplit"

  scaling:
    method: "StandardScaler"  # or "MinMaxScaler"

output:
  save_models: true
  save_predictions: true
  save_comparison: true
  format: "excel"  # and/or "csv"
